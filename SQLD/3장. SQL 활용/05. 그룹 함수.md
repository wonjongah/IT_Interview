#### 1. 데이터 분석 개요

SQL 표준은 데이터 분석을 위해서 다음 세 가지 함수를 정의하고 있다.

- AGGREGATE FUNCTION
- GROUP FUNCTION
- WINDOW FUNCTION



- AGGREGATE FUNCTION

GROUP AGGREGATE FUNCTION이라고도 부르며, GROUP FUNCTION의 한 부분으로 분류할 수 있다.

COUNT, SUM, AVG, MAX, MIN의 각종 집계 함수들이 포함되어 있다.



- GROUP FUNCTION

결산 개념의 업무를 가지는 원가나 판매 시스템의 경우 소계, 중계, 합계, 총 합계 등 여러 레벨의 결산 보고서를 만드는 것이 중요 업무 중의 하나이다.

이런 경우 배치 프로그램을 작성하거나, 레벨별 집계를 위한 여러 단계의 SQL을 UNION, UNION ALL로 묶은 후 하나의 테이블을 여러 번 읽어 다시 재정렬하는 복잡한 단계를 거쳐야 했다.

하지만 그룹함수를 사용하면 하나의 SQL로 테이블을 한 번만 읽어 빠르게 원하는 리포트를 작성할 수 있다.

추가로 소계/합계를 표시하기 위해 GROUPING 함수와 CASE 함수를 이용하면 쉽게 원하는 포맷의 보고서 작성도 가능하다.

<u>그룹함수로는 집계 함수를 제외하고, 소그룹 간의 소계를 계산하는 ROLLUP 함수, GROUP BY 항목들 간 다차원적인 소계를 계산할 수 있는 CUBE 함수, 특정 항목에 대한 소계를 계산하는 GROUPING SETS 함수가 있다.</u>

<u>ROLLUP은 GROUP BY의 확장된 형태로 사용하기가 쉬우며 병렬로 수행이 가능하기 때문에 매우 효과적일 뿐 아니라 시간 및 지역처럼 계층적 분류를 포함하고 있는 데이터의 집계에 적합하도록 되어 있다.</u>

<u>CUBE는 결합 가능한 모든 값에 대하여 다차원적인 집계를 생성하게 되므로 ROLLUP에 비해 다양한 데이터를 얻는 장점이 있는 반면, 시스템에 부하를 많이 주는 단점이 있다.</u>

<u>GROUPING SETS는 원하는 부분의 소계만 손쉽게 추출할 수 있는 장점이 있다.</u>

<u>ROLLUP, CUBE, GROUPING SETS 결과에 대한 정렬이 필요한 경우는 ORDER BY 절에 정렬 칼럼을 명시해야 한다.</u>



- WINDOW FUNCTION

분석 함수나 순위 함수로도 알려져 있는 윈도우 함수는 데이터 웨어하우스에서 발전한 기능이다.



#### 2. ROLLUP 함수

