##### 레지스터

<u>처리 중인 데이터나 처리 결과를 임시 보관하는 기능</u>을 하며 <u>산술 연산이나 정보 해석, 전송등을 할 수 있는 일정 길이의 정보를 저장하는 CPU 내부의 초고속 기억장치</u>



##### 레지스터의 종류

| 종류                         | 상세설명                                                     |
| ---------------------------- | ------------------------------------------------------------ |
| PC(PROGRAM COUNTER)          | 다음에 인출할 명령어의 주소를 가지고 있는 레지스터           |
| MAR(MEMORY ADDRESS REGISTER) | 메모리 주소를 일시적으로 저장하는 레지스터                   |
| MBR(MEMORY BUFFER REGISTER)  | 기억장치에 쓰여질 데이터 혹은 기억장치로부터 읽혀진 데이터를 일시적으로 저장하는 버퍼 레지스터 |
| IR(INSTRUCTION REGISTER)     | 가장 최근에 인출된 명령어 코드가 저장되어 있는 레지스터      |
| AC(ACCUMULATOR)              | 데이터나 연산결과를 일시적으로 저장하는 레지스터             |



##### 레지스터 동작 절차

- 명령어 인출과정에서 MAR이 지시하는 주기억장치의 주소 번지에서 데이터를 읽어와서 MBR에 저장한다.
- 저장 과정에서는 MAR에 저장되어 있는 주소 번지에 해당하는 주기억장치 위치에 MBR에 저장되어 있는 데이터를 저장한다.



##### 인터럽트

프로그램 실행 중 CPU의 현재 처리 순서를 중단시키고 다른 동작을 수행하도록 요구하는 시스템 동작



##### 인터럽트 발생원인

- 기계적인 문제(정전, 데이터 전달 과정에서 하드웨어 오류 발생)
- 프로그램 상의 문제
- 컴퓨터 조작자의 의도적인 조작에 의한 중단
- 입출력 장치들의 동작에 CPU의 기능이 요청되는 경우
- 산술 연산 오버 플로우, 언어플로우 발생



##### 인터럽트 유형

- 외부 인터럽트(하드웨어 인터럽트)
  - 전원 이상 
    - 정전 또는 전원 이상에 의한 인터럽트 발생
  - 기계 착오
    - CPU의 기능적인 오류 동작 발생
  - 외부 신호
    - 타이머에 의한 규정된 시간을 알리는 경우
    - 키보드로 인터럽트 발생
    - 외부 장치로부터 인터럽트 요청 발생
  - 입/출력
    - 입출력 데이터의 오류나 이상 현상이 발생한 경우
    - 입출력 장치가 데이터의 전송을 요구 또는 전송 완료 알림
- 내부 인터럽트(하드웨어 인터럽트)
  - 프로그램 검사
    - 0으로 나누기
    - 오버 플로우, 언어플로우
    - 부당한 기억장소 참조와 같은 프로그램 상 오류
- 소프트웨어 인터럽트
  - SVC 명령
    - 사용자가 SVC 명령을 써서 의도적으로 발생한다.
    - 기억장치 할당 및 오퍼레이터와의 통신이 필요한 경우



##### 인터럽트 처리 루틴

- 인터럽트가 발생하면, 인터럽트를 받은 장치는 현재 자신의 상태를 PCB라는 자료구조에 기억시켜두고 인터럽트를 처리한다.
- 인터럽트 처리루틴(IPR)을 수행한 후, 인터럽트 처리 시 보존시켰던 상태를 제어상태 레지스터에 복구한다.

인터럽트 인지 -> 현재 상태 보존 -> 요청 인터럽트 서비스로 분기 및 서비스 -> 사용자 상태 복구 및 재개



##### 명령어 수행 과정(INSTRUCTION CYCLE)

- 명령어 사이클은 인출 - 해독 - 실행 - 저장의 순서이다.
- Fetch한 명령어의 operand가 간접주소일 경우 : Indirect Cycle
- Fetch한 명령어의 operand가 직접주소인 경우 : Execute Cycle

<u>명령어 인출 -> 명령어 해독 -> 명령어 실행 -> 데이터 저장</u>



##### 프로세스의 주 상태 종류

- 인출(Fetch Cycle)
  - 주기억장치로부터 수행할 명령어를 cpu로 가져오는 단계
  - 명령어의 operand가 간접주소일 경우 : Indirect Cycle
  - 명령어의 operand가 직접주소인 경우 : Execute Cycle
- 간접(indirect Cycle)
  - 명령어의 operand가 간접주소 지정이 된 경우 유효 주소를 계산하기 위해 주기억장치에 접근하는 단계
- 실행(Execute Cycle)
  - 명령의 코드를 해독결과에 따라 필요한 연산들을 수행
- 인터럽트(Interrupt Cycle)
  - 인터럽트 발생 시 인터럽트 처리를 하고 완료되면 Fetch로 진행



##### Locality(구역성, 지역성, 국부성, 국소성)

- 프로그램의 어느 한 특정 부분만 한동안 집중적으로 참조하는 현상
- 메모리 계층구조나 데이터베이스의 LRU 알고리즘은 구역성 특징을 활용해 성능을 향상시킨 사례이다.

| 기법        | 내용                                                         | 사례                        |
| ----------- | ------------------------------------------------------------ | --------------------------- |
| 시간 구역성 | 최근에 액세스된 프로그램이나 데이터가 가까운 미래에 다시 액세스 될 가능성이 높다. | loop, subroutine            |
| 공간 구역성 | 기억장치 내 인접하여 저장된 데이터들이 연속적으로 액세스 될 가능성이 높다 | array, table, 순차코드 실행 |
| 순차 구역성 | 분기하지 않는 한, 명령어들은 기억장치에 저장된 순서대로 인출되어 실행된다. | 구조적 프로그래밍           |



##### 인터럽트 우선순위

- 소프트웨어 방식(**폴링**)
  - CPU가 모든 I/O 제어기들에 접속된 선 이용, 인터럽트를 요구한 장치를 검사하는 방식
  - Test I/O 신호를 이용해 각 I/O 장치의 인터럽트 플래그 세트되어 있는지 검사
  - 검사 순서가 우선 순위를 결정
  - 장점
    - 소프트웨어 수정을 통해 우선순위 변경이 쉽다.
    - 회로가 간단하고 융통성이 있으며 별도의 하드웨어 불필요
  - 단점
    - 많은 인터럽트가 있을 경우 그것들을 모두 조사하는데 많은 시간이 걸려 처리시간이 오래 걸린다.
- 하드웨어 방식
  - **직렬연결**
    - **Daisy-Chain(데이지 체인)**
    - 우선순위 부여 방식으로 인터럽트가 발생하는 모든 장치를 한 개의 회선에 직렬로 연결(CPU로 발생되는 INTA 출력선을 I/O 제어기들에 직렬로 접속하는 방식)
    - 우선순위가 높은 장치를 선두에 위치시키고 나머지를 우선순위에 따라 차례로 연결한다.
    - 인터럽트를 요구한 I/O 장치는 Ain 입력을 받는 즉시 자신의 고유번호, 인터럽트 벡터를 벡터 버스를 통해 CPU로 전송한다.
    - 인터럽트 벡터는 해당 I/O 장치를 위한 인터럽트 서비스 루틴의 시작 주소를 결정한다.
  - 장점
    - 하드웨어 구조가 간단하다.
  - 단점
    - 우선순위 낮은 장치들이 서비스를 받지 못하는 현상이 발생한다.
  - **병렬연결**
    - **Mutiple Interrupt**
    - 각 I/O 제어기와 CPU 사이에 인터럽트 요구선과 인터럽트 확인 선을 접속하는 방식
    - 인터럽트가 발생하는 각 장치를 개별적인 회선으로 연결한다.
    - 각 장치의 회선에 대응하는 Mask Register를 사용하고 우선순위는 Mask Register의 비트 위치에 의해 결정한다.
  - 장점
    - cpu가 인터럽트를 요구한 장치식별이 용이하다.
  - 단점
    - 입력 핀의 수에 의해 제한한다.



##### DMA(Direct Memory Access)

- <u>입출력 장치 제어기가 CPU에 의한 프로그램의 실행 없이 자료의 이동을 하는 방식</u>
- <u>입출력 속도 향상이 가능하며, CPU와 주변 장치간의 속도 차를 줄일 수 있다.</u>
- DMA 제어기가 자료 전송 종료 후, 입출력 장치가 DMA를 요구하면 CPU가 CPU 사이클이 끝나는 지점마다 메인메모리의 제어를 허용한다.



##### Isolated I/O (I/O Mapped I/O)

- IN, OUT 명령에 의해 주어진 I/O 포트에 입출력 기기가 접속되어 입출력을 수행
- 입/출력 명령이 각각 인터페이스 레지스터 주소를 가진다.



##### Interrupt I/O

- 데이터 전송을 마이크로컴퓨터의 인터럽트 기능을 가진 하드웨어에 의해서 제어하는 방식
- 입출력 기기의 동작 완료를 인터럽트 신호로써 입출력 기기에서 CPU로 보내면, CPU가 인터럽트 신호를 확인한 다음 현재 실행 중인 프로그램을 중단하고 입출력 기기와 데이터 전송을 수행하는 방식이다.



##### 시스템 소프트웨어의 종류와 각 기능

| 시스템 소프트웨어         | 개념                                                         |
| ------------------------- | ------------------------------------------------------------ |
| 운영체제                  | 하드웨어와 소프트웨어 자원을 관리하고 컴퓨터 프로그램을 위한 공통 서비스를 제공하는 프로그램 |
| 어셈블러                  | 어셈블리어를 기계어로 변환해주는 프로그램                    |
| 컴파일러 또는 언어 번역기 | 고급 언어로 작성한 원시 프로그램을 기계어인 목적 프로그램으로 바꾸어 주는 프로그램 |
| 인터프리터                | 고급 언어나 코드화된 중간 언어를 입력받아 목적 프로그램 생성 없이 직접 기계어를 생성하여 실행해주는 프로그램 |
| 전처리기                  | 원시 프로그램을 번역하기 전에 미리 언어의 기능을 확장한 원시 프로그램을 생성하는 시스템 프로그램 ex) #include |
| 링커                      | 서로 독립적으로 작성되고 번역된 목적 프로그램을 호출 및 연계시키는 시스템 프로그램 |
| 로더                      | 실행 Code를 주기억장치에 적재해 실행 가능하도록 해주는 시스템 프로그램 |



##### 로더의 단계별 동작

<u>할당 -> 링킹 -> 재배치 -> 적재</u>

- 할당 (프로그램 수행에 필요한 기억장소를 할당 받는 기능)
  - 프로그램의 일부에 대한 기억장치를 할당 후 실행 시 필요한 부분만을 기억장치에 할당
- 링킹 (실행중인 여러 프로그램이 라이브러리나 특정 모듈을 공유 가능하도록 프로그램에 적재 시에 링크하는 기능)
  - 링킹 로더는 링커에 의해 제공된 목적파일의 재배치 정보를 통해 실행 가능한 코드를 만들어 주기억장치에 적재한다.
- 재배치 (프로그램 내 재배치 가능한 상대주소를 할당된 메모리의 절대주소로 변환하는 기능)
  - 목적 코드의 각 명령에 대해 재배치 여부를 명시하는 재배치 비트를 추가해 표시한다.
- 적재 (할당, 링킹, 재배치 작업이 수행된 프로그램을 주기억장치에 적재하는 기능)
  - 로더의 할당 방법에 의거, 필요한 기능을 수행한다.

로더는 할당, 링킹, 재배치, 적재를 통해 프로그램을 주기억장치에 적재한다.



##### 로더의 종류

- 컴파일 즉시 로더
  - 가장 간단한 방법
  - 번역기가 로더의 역할까지 담당
  - 로더의 기능은 단순히 실행을 제어
  - 어셈블러의 재번역 요구
  - 서로 다른 언어로 작성된 모듈 간 연결 불가
- 절대 로더
  - 출력 결과는 보조 기억장치에 저장
  - 기계어 코드 프로그램에서 미리 지정한 번지에 프로그램과 데이터를 직접 적재
  - 프로그래머가 어셈블러에게 적재주소 지정
- 재배치 로더
  - 적재 모듈을 주기억장치에 적재
  - 상대주소를 절대주소로 변환
  - 로드 과정에서 메모리의 적당한 영역을 찾아 로드
- 링킹 로더
  - 재배치 링크 및 적재를 한꺼번에 수행
  - 두 단계의 패스로 구성
- 동적 로더
  - 재배치 로더와 링킹 로더의 단점 보안
  - CPU가 현재 사용 중인 부분만 로드
  - 미사용 중인 프로그램은 보조기억장치에 저장해두는 방식
  - 서브루틴들의 상호 호출 관계 파악
  - load-on-call이라고도 한다.



##### 유닉스 명령어

- chmod
  - 파일이나 디렉토리의 접근 권한을 변경하는 명령어
  - read, write, execute 권한을 추가 또는 제거한다.
- du
  - 현재 디렉토리 아래의 디스크 사용현환을 출력한다.
- fork
  - fork() 함수는 현재 프로세스에 대해 자식 프로세스를 생성하는 함수
- cat
  - cat 파일명을 통해 파일의 내용을 보는 명령어



##### 접근 권한 유형

|      | owner(소유자) |      |      | group |      |      | other |      |
| ---- | ------------- | ---- | ---- | ----- | ---- | ---- | ----- | ---- |
| r    | w             | x    | r    | w     | x    | r    | w     | x    |
| 4    | 2             | 1    | 4    | 2     | 1    | 4    | 2     | 1    |

- Read(r)
  - 일반 파일 : 읽기와 복사 가능
  - 디렉토리 : 디렉토리의 내용 표시 가능
- Write(r)
  - 일반 파일 : 수정 기능
  - 디렉토리 : 파일의 추가와 삭제 기능
- Execute(x)
  - 일반 파일 : 수행 가능
  - 디렉토리 : 티렉토리의 변경 가능

ex)

```java
chmod 777 test.txt
// test.txt 파일을 파일의 owner, group, other 모두에게 읽기, 쓰기, 실행권한을 모두 부여

chmod 700 test.txt
// test.txt 파일을 파일의 owner에게만 읽기, 쓰기, 실행 권한 부여

chmod 750 test.txt
// test.txt 파일을 파일의 owner에게만 읽기, 쓰기, 실행 권한 부여, group에게는 읽기, 실행 권한을 부여
```



##### 리눅스/유닉스 운영체제의 기본 명령어

| 분류               | 명령어                            |
| ------------------ | --------------------------------- |
| 사용자             | #id, #last, #who 등               |
| 파일 처리          | #ls, #pwd, #rm, #cp, #mv, #tar 등 |
| 프로세스           | #ps, #pmap, #kill pid 등          |
| 파일 permission    | #chmod, #chown 등                 |
| 네트워크           | #ifconfig, #dig, #host 등         |
| 인스톨             | #yum, #rpm 등                     |
| 검색               | #grep, #find, #locate 등          |
| 디렉토리 이동/생성 | #cd, #mkdir 등                    |

